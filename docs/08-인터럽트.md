## 인터럽트 VS 예외
인터럽트와 예외의 공통점은 일종의 이벤트라는 것이다.
- 인터럽트 : 주로 외부에서 발생함.
- 예외 : 프로세서 스스로 발생시킴.

둘 다 이벤트 핸들러가 필요함.

## IDT
프로세서는 인터럽트가 발생하면 벡터 테이블의 인덱스에 해당하는 주소로 이동하여 처리 함수를 수행함.

이러한 벡터 테이블은 각 운영 모드마다 존재함.

리얼 모드는 패스, 32비트와 64비트 모드에서는 IDT를 벡터 테이블로 사용함.

IDT는 GDT처럼 IDT 게이트 디스크립터로 이루어진 테이블로, IDTR 레지스터를 통해 프로세서에 IDT 테이블 정보를 설정 가능.

- IDT 게이트 디스크립터 : 16 바이트
- IDT 테이블 엔트리 개수 : 256

### IDT 게이트 디스크립터
세그먼트 셀렉터를 항목으로 가지고 있음. 이는 유저 레벨 (Ring 3)에서 커널 레벨(Ring 0)로 권한 상승이 필요할 때가 있기 때문임.

두 가지 타입이 있음.

#### 인터럽트 게이트
핸들러를 수행하는 동안 인터럽트나 예외가 더 이상 발생하지 않게함.

#### 트랩 게이트
핸들러를 수행하는 동안 다른 인터럽트가 발생함.

### IST
Interrupt Stack Table로, 인터럽트나 예외 발생 시 별도의 스택 공간을 할당하는 기능임. 인터럽트나 예외가 발생했을 때 핸들러 수행 전에 IST 필드에 지정된 스택 어드레스로 자동으로 스택을 전환함.

## 인터럽트 및 예외의 종류
IDT 테이블의 상위 32개 디스크립터는 프로세서 스스로 예외 디스크립터로 예약해놓음. 나머지 224개는 OS가 임의로 사용함.

프로세서가 예약한 예외 20개는 3개의 종류로 나뉨.
1. Fault : 해결 가능한 문제 발생, 해결 후 다시 돌아가 문제 발생한 코드를 실행
2. Trap : 해결 가능한 문제 발생, 해결 후 다시 돌아가 문제 발생한 코드 다음 코드를 실행
3. Abort : 해결 불가능한 문제 발생, 강제종료

### 인터럽트의 종류와 발생 원인
PIC라는 CPU 옆 장치를 통해 인터럽트를 관리한다.

PIC는 inb outb를 통해 제어할 수 있으며, 인터럽트 자체는 알아서 CPU가 잘 가져온다.

IRQ는 인터럽트 벡터랑 별 관련이 없으며, PIC 내부에서 인터럽트 관리용 숫자임.